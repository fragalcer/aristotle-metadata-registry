{% extends "aristotle_mdr/concepts/managedContent.html" %}
{% load i18n aristotle_tags util_tags %}

{% block extra_head_scripts %}
    {{ block.super }}
    <style>
        .file_type {
            border:1px solid black;
            border-top-right-radius: 10px;
            padding:4px;
            font-size:8pt;
        }
    </style>

{% endblock %}

{% block objSpecific %}
    {% if item.linkToData %}
        <strong>Data is available at </strong><a href="{{ item.landing_page }}">{{ item.landing_page }}</a>.
    {% else %}
        No link to the data is available.
    {% endif %}
    For more details on how to access this data contact the publishing organisation.

    <h2>Data source details</h2>
    <dl class="">
        <dt>Frequency</dt>
        <dd>{% if item.frequency %}
            {{ item.frequency }}
        {% else %}
            {% trans "No frequency stated" %}
        {% endif %}
        </dd>
        <dt>Distribution files</dt>
        <dd>
            {% with distributions=item.distribution_set.all|can_view_iter:request.user %}
            {% if distributions %}
                <ol>
                    {% for distribution in distributions %}
                        <li class="well">
                            <span class="file_type">{{distribution.format_type}}</span>
                            {% include "aristotle_mdr/helpers/itemLink.html" with item=distribution %}
                            {% if distribution.origin_URI %}
                                <a href='{{distribution.download_URL}}' class='btn btn-default'>
                                    <i class='fa fa-download'></i>
                                    Download
                                </a>
                            {% endif %}

                            <div>
                                {{ distribution.definition|bleach }}
                            </div>
                            <dl>
                                <dt style="float:left">Licence</dt><dd>{{ distribution.license }}</dd>
                                <dt style="float:left">Rights</dt><dd>{{ distribution.rights }}</dd>
                            </dl>
                        </li>
                    {% endfor %}
                </ol>
            {% else %}
                <em>None</em>
            {% endif %}
            {% endwith %}
        </dd>
    </dl>
    {% if can_edit %}
        {% bootstrap_modal 'dse_modal' size='lg' %}
    {% endif %}

{% endblock %}
